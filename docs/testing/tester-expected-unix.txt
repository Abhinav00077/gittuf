+ cd ..
+ mkdir repo
+ cd repo
+ git init -q -b main
+ git config --local gpg.format ssh
+ git config --local user.signingkey ../keys/developer
+ gittuf trust init -k ../keys/root
Signing data on standard input
Signing data on standard input
+ gittuf trust add-policy-key -k ../keys/root --policy-key ../keys/policy.pem
Signing data on standard input
Signing data on standard input
+ gittuf policy init -k ../keys/policy --policy-name targets
Signing data on standard input
Signing data on standard input
+ gittuf policy add-rule -k ../keys/policy --rule-name protect-main --rule-pattern git:refs/heads/main --authorize-key ../keys/developer.pem
Signing data on standard input
Signing data on standard input
+ gittuf policy apply
Signing data on standard input
+ echo 'Hello, world!'
+ git add .
+ git commit -S -m 'Initial commit'
[main (root-commit) 22949ca] Initial commit
 1 file changed, 1 insertion(+)
 create mode 100644 README.md
+ gittuf rsl record main
Signing data on standard input
+ gittuf verify-ref main
